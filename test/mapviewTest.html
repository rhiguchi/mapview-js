<!DOCTYPE html>
<html lang="ja">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.0/jquery.js" type="text/javascript"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/jquery-ui.js" type="text/javascript"></script>
	<script src="../mapview.js" type="text/javascript"></script>
	<script src="/jsunit/app/jsUnitCore.js" type="text/javascript"></script>
	<script type="text/javascript">//<!--

var mapview;

function setUp() {
    mapview = $('<div>', {
        id: 'mapview',
    }).mapview();
}

function tearDown() {
    mapview.mapview("destroy");
}

function testCreate() {
    assertTrue(mapview.hasClass('ui-mapview'));
}

function createTestData(count) {
    var data_list = [];
    
    for (var i = 0; i < count; i++) {
        var id = 'id-' + ('00' + i).substr(-3);
        var posX = Math.random();
        var posY = Math.random();
        data_list.push([
            id, posX, posY
        ]);
    }
    
    return data_list;
}

function testSetModel() {
    var model = createTestData(100);
    
    assertEquals(mapview, mapview.mapview("model", model));
    
    var optionModel = mapview.mapview("model");
    assertEquals(100, optionModel.length);
    assertEquals(model, optionModel);
    
    var optionModel2 = mapview.mapview("option", "model");
    assertEquals(optionModel, optionModel2);
    
    assertEquals(1, mapview.find('#id-001').size());
    assertEquals(1, mapview.find('#id-002').size());
    assertEquals(100, mapview.find('.ui-mapview-item').size());
}

jQuery(function(){
    var model = createTestData(100);
    var mapview = $('#mapview').mapview();
    
    mapview.mapview("model", model);
});

	//--></script>

	<title>Map View Test</title>
</head>
<body>
<div id="mapview"></div>
</body>
</html>
